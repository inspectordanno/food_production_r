load("~/Documents/GitHub/food_production_r/food.rdata")
View(food)
##load data
load(file = "food.rdata")
##load data
load(file = "food.rdata")
install.packages("rworldmap")
library(tidyverse)
library(leaflet)
library(rworldmap)
##load data
load(file = "food.rdata")
View(food)
View(food)
##match data to country
matched <- joinCountryData2Map(food, joinCode = "NAME", nameJoinColumn = "Area")
starwars
wheat <- filter(Item == "Wheat and products")
wheat <- filter(food, Item == "Wheat and products")
View(wheat)
##match data to country
matched <- joinCountryData2Map(wheat, joinCode = "NAME", nameJoinColumn = "Area")
wheat1970 <- filter(wheat, Year == 1970)
View(wheat1970)
cereals <- filter(food, Item == "Cereals, other")
cereals1970 <- filter(cereals, Year == 1970)
cereals <- filter(food, Item == "Cereals, Other")
cereals1970 <- filter(cereals, Year == 1970)
##match data to country
matched <- joinCountryData2Map(cereals1970, joinCode = "NAME", nameJoinColumn = "Area")
View(cereals1970)
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
View(matched)
load("~/Documents/GitHub/food_production_r/food.rdata")
load("~/Documents/GitHub/food_production_r/food.rdata")
View(food)
library(tidyverse)
food_data <- read.csv('food.csv', stringsAsFactors = F)
View(food_data)
tmp <- gather(food_data, key = Year, value = Amount, 11:63)
tmp$Year <- substr(tmp$Year,2,5)
food <- select(tmp, Area, Area.Abbreviation, Item, Element, Year, Amount)
View(tmp)
View(food)
food$Year <- as.numeric(food$Year)
save(food,file = "food.rdata")
load("~/Documents/GitHub/food_production_r/food.rdata")
load("~/Documents/GitHub/food_production_r/food.rdata")
View(food)
##load data
load(file = "food.rdata")
wheat <- filter(food, Item == "Wheat and products", Element == "Food")
View(wheat)
wheat1970 <- filter(wheat, Year == 1970)
View(wheat1970)
##match data to country
matched <- joinCountryData2Map(wheat1970, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
library(rworldmap)
##match data to country
matched <- joinCountryData2Map(wheat1970, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
wheat1980 <- filter(wheat, Year == 1980)
matched2 <- joinCountryData2Map(wheat1970, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
wheat1990 <- filter(wheat, Year == 1990)
matched2 <- joinCountryData2Map(wheat1990, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
library(tidyverse)
library(leaflet)
library(rworldmap)
food.csv
library(tidyverse)
library(leaflet)
library(rworldmap)
##load data
load(file = "food.rdata")
wheat <- filter(food, Item == "Wheat and products", Element == "Food")
wheat1970 <- filter(wheat, Year == 1970)
wheat1990 <- filter(wheat, Year == 1990)
##match data to country
matched <- joinCountryData2Map(wheat1970, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
matched2 <- joinCountryData2Map(wheat1990, joinCode = "ISO3", nameJoinColumn = "Area.Abbreviation")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "fixedWidth", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "fixedWidth", colourPalette = "heat")
mapCountryData(matched, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1970", catMethod = "pretty", colourPalette = "heat")
mapCountryData(matched2, nameColumnToPlot="Amount", mapTitle="Worldwide Production of Wheat in 1990", catMethod = "pretty", colourPalette = "heat")
install.packages("grid")
library(tidyverse)
library(leaflet)
library(rworldmap)
##load data
load(file = "food.rdata")
wheat <- filter(food, Item == "Wheat and products", Element == "Food")
wheat1970 <- filter(wheat, Year == 1970)
wheat1990 <- filter(wheat, Year == 1990)
load("~/Documents/GitHub/food_production_r/food.rdata")
View(food)
View(wheat)
ggplot(wheat) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
sel <- c("ZAF","AFG")
sample <- filter(Area.Abbreviation == sel)
sample <- filter(food, Area.Abbreviation == sel)
sel <- c("ZAF","AFG")
food[Area.Abbreviation %in% sel,]
food[food$Area.Abbreviation %in% sel,]
sel <- c("ZAF","AFG", "SFB", "PAK", "PER", "USA", "GBR")
dat <- food[food$Area.Abbreviation %in% sel,]
View(dat)
ggplot(dat) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
ggplot(dat) + geom_line(aes(x = Year, y = Amount, color = Item)) + facet_wrap(~Area)
ggplot(dat[dat$Item=="Wheat"]) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
ggplot(dat[dat$Item=="Wheat and products"]) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
ggplot(dat[dat$Item=="Wheat and products",]) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
dat[dat$Item=="Wheat and products",]
ggplot(dat[dat$Item=="Wheat and products" & dat$Element == "Food",]) + geom_line(aes(x = Year, y = Amount)) + facet_wrap(~Area)
ggplot(dat[dat$Item=="Wheat and products",]) + geom_line(aes(x = Year, y = Amount, color = Element)) + facet_wrap(~Area)
View(food)
library(sp)
library(sp)
library(rgdal)
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
plot(map)
data <- map@data
View(data)
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
View(dat.s)
tmp <- merge(dat.s,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
View(tmp)
library(dplyr)
library(sp)
library(rgdal)
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
plot(map)
mergedData <- merge(dat.s,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
library(tidyverse)
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
plot(map)
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
dat.s <- dplyr::select(data,POP_EST,GU_A3,SU_A3)
dat.s <- select(data,POP_EST,GU_A3,SU_A3)
dat.s <- select(map@data,POP_EST,GU_A3,SU_A3)
mergedData <- merge(dat.s,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
dat <- food[food$Area.Abbreviation %in% sel,]
food = load("food.rdata")
load("food.rdata")
dat <- food[food$Area.Abbreviation %in% sel,]
tst <- food_data[1:100,]
food_data <- read.csv('food.csv', stringsAsFactors = F)
tst <- food_data[1:100,]
View(tst)
food_data <- read.csv('food.csv', stringsAsFactors = F)
tmp <- gather(food_data, key = Year, value = Amount, 11:63)
tmp$Year <- substr(tmp$Year,2,5)
food <- select(tmp, Area, Area.Abbreviation, Item, Element, Year, Amount)
sel <- c("ZAF","AFG", "SFB", "PAK", "PER", "USA", "GBR")
dat <- food[food$Area.Abbreviation %in% sel,]
sample <- filter(food, Area.Abbreviation == sel)
save(food,file = "food.rdata")
View(food_data)
countrySelection <- c("ZAF","AFG", "SFB", "PAK", "PER", "USA", "GBR")
load("food.rdata")
View(food)
dat <- food[food$Area.Abbreviation %in% sel,]
dat <- food[food$Area.Abbreviation %in% countrySelection,]
##map
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
dat.s <- select(map@data,POP_EST,GU_A3,SU_A3)
mergedData <- merge(dat.s,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
View(mergedData)
wheatFood <- filter(mergedData, Item == "Wheat and products", Element == "Food", Year == "1990")
wheatFeed <- filter(mergedData, Item == "Wheat and products", Element == "Feed", Year == "1990")
View(wheatFeed)
View(wheatFood)
View(mergedData)
View(wheatFeed)
View(food)
View(food)
View(food)
View(dat.s)
dat.s$pop <- as.numeric(as.character(dat.s$POP_EST))
large <- dat.s[dat.s$pop>10000000,]
View(large)
mergedData <- merge(dat.s,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
mergedData <- merge(large,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
mergedData <- merge(large,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
food <- select(tmp, Area, Area.Abbreviation, Item, Element, Year, Amount)
mergedData$Year <- as.numeric(mergedData$Year)
ggplot(mergedData[mergedData$Item=="Cereal and products",]) + geom_line(aes(color = Element, x = Year, y = Amount))
ggplot(mergedData[mergedData$Item=="Cereal and products",]) + geom_line(aes(color = Element, x = Year, y = Amount)) + facet_wrap(~Area)
mergedData[mergedData$Item=="Cereal and products",]
mergedData$Item
ggplot(mergedData[mergedData$Item=="Cereals - Excluding Beer",]) + geom_line(aes(color = Element, x = Year, y = Amount)) + facet_wrap(~Area)
dat <- food
mergedData <- merge(large,dat, by.y = "Area.Abbreviation", by.x= "GU_A3")
mergedData$Year <- as.numeric(mergedData$Year)
ggplot(mergedData[mergedData$Item=="Cereals - Excluding Beer",]) + geom_line(aes(color = Element, x = Year, y = Amount)) + facet_wrap(~Area)
ggplot(mergedData[mergedData$Item=="Wheat and products",]) + geom_line(aes(color = Element, x = Year, y = Amount)) + facet_wrap(~Area)
countrybyContinent <- read.csv('country_continent.csv')
View(countrybyContinent)
View(dat.s)
dat.s <- select(map@data,POP_EST, GU_A2, GU_A3,SU_A3)
View(map)
View(countrybyContinent)
View(dat.s)
View(map)
map@data[["SUBREGION"]]
map@data[["CONTINENT"]]
map@data[["REGION_WB"]]
map@data[["REGION_UN"]]
map@data[["REGION_WB"]]
map@data[["SUBREGION"]]
map@data[["REGION_WB"]]
map@data[["SUBREGION"]]
map$REGION_WB
unique(map$REGION_WB)
unique(map$REGION_UN)
unique(map$SUBREGION)
shiny::runApp('food_or_feed')
load("~/Documents/GitHub/food_production_r/food.rdata")
View(food)
library(tidyverse)
library(rgdal)
##map
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
View(map)
dat.s <- select(map@data,POP_EST,GU_A3,SU_A3, CONTINENT, REGION_UN, SUBREGION, REGION_WB)
dat.s$pop <- as.numeric(as.character(dat.s$POP_EST))
save(dat.s,file= "countries.rdata")
load("~/Documents/GitHub/food_production_r/countries.rdata")
View(dat.s)
View(dat.s)
View(dat.s)
View(dat.s)
runApp('food_or_feed')
runApp('food_or_feed')
runApp('food_or_feed')
runApp('food_or_feed')
runApp('food_or_feed')
View(food)
countriesbyFood <- merge(dat.s,food, by.y = "Area.Abbreviation", by.x= "GU_A3")
View(countriesbyFood)
countriesbyFood$Year <- as.numeric(countriesbyFood$Year)
View(countriesbyFood)
View(countriesbyFood)
save(countriesbyFood,file= "countriesbyFood.rdata")
runApp('food_or_feed')
table(countriesbyFood$Item, countriesbyFood$Element)
t <- table(countriesbyFood$Item, countriesbyFood$Element)
t[1]
t[,1]
t$Element
t[t[,1]==0,]
t[,1]==0
t2 <- t[t[,1]==0,]
t2
t3 <- names(t2)
t3
t2 <- t[t[,1]!=0,]
rownames(t2)
t3 <- rownames(t2)
t3
countriesbyFood[countriesbyFood$Item %in% t3, ]
tmp <- countriesbyFood[countriesbyFood$Item %in% t3, ]
countriesbyFood <- countriesbyFood[countriesbyFood$Item %in% t3, ]
save(countriesbyFood,file= "countriesbyFood.rdata")
runApp('food_or_feed')
##load food data
load(file = "../countriesbyFood.rdata")
##load food data
load(file = "countriesbyFood.rdata")
runApp('food_or_feed')
runApp('food_or_feed')
runApp('food_or_feed')
food_data <- read.csv('food.csv', stringsAsFactors = F)
tmp <- gather(food_data, key = Year, value = Amount, 11:63)
tmp$Year <- substr(tmp$Year,2,5)
food <- select(tmp, Area, Area.Abbreviation, Item, Element, Year, Amount)
food$Year <- as.numeric(food$Year)
##map
map <-  readOGR(dsn = "shapefiles", layer = "ne_50m_admin_0_countries")
dat.s <- select(map@data,POP_EST,GU_A3,SU_A3, CONTINENT, REGION_UN, SUBREGION, REGION_WB)
dat.s$pop <- as.numeric(as.character(dat.s$POP_EST))
large <- dat.s[dat.s$pop>10000000,]
countriesbyFood <- merge(dat.s,food, by.y = "Area.Abbreviation", by.x= "GU_A3")
countriesbyFood$Year <- as.numeric(countriesbyFood$Year)
t <- table(countriesbyFood$Item, countriesbyFood$Element)
t
runApp('food_or_feed')
runApp('food_or_feed')
runApp('food_or_feed')
t
tx <-  as.data.frame(t)
View(tx)
t
t[1,1]
t[1,2]
t[,2] == 0
t[,1]==0
v <-  t[,1]==0
v <-  t[,1]!=0
v <-  t[,1]!=0
t2 <- t[v,]
t3 <- rownames(t2)
